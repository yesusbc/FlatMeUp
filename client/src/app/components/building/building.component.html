<div class="col-lg-8 col-lg-offset-2">
	<h1 class="h1-strong">{{title}}</h1>
	
		<div class="panel-body">
			<div class="building-text pull-left">
				<h4>{{building.address.street + ", " + 
					building.address.buildingNumber}}
				<span *ngIf="building.address.apartment">, {{building.address.apartment}}</span>
				. 
				{{building.address.state + ", " + 
				building.address.country}}
				</h4>
				
				<h2>
				Global Rate: {{globalRate}}
				</h2>

				<b>Average Rate</b>

				<p>
				Noise: {{globalNoise}} <br>
				Price-Benefit: {{globalPriceBenefit}} <br>
				Landlord Support: {{globalLandlordSupport}} <br>
				Maintenance: {{globalMaintenance}}
				</p>

				<p>
				Number of reviews: {{reviewsCounter}}
				</p>

				<span class="date" class="text-muted">
					{{ (building.created_at | amFromUnix) | amLocale:'en' | amTimeAgo}}
				</span>
			</div>

			<div class="building-image pull-right"> 
				<div class="building-default" *ngIf="building.file.length == 1" align="center">
					<img src="{{url+'get-image/'+building.file[0]}}" width="350" height="200"/>
				</div>

				<!--Carousel Wrapper-->
				<div id="building-image-gallery" class="carousel slide" data-ride="carousel" *ngIf="building.file.length >1">
				  	<!-- Indicators -->
					<ol class="carousel-indicators">
						<li data-target="#building-image-gallery" data-slide-to="0" class="active"></li>
						<li data-target="#building-image-gallery" *ngFor="let image of building.file.slice(1); let i = index" data-slide-to="{{i+1}}"></li>

					</ol>

					<!-- Wrapper for slides -->
				  	<div class="carousel-inner" role="listbox" >
					    <div class="item active">
					    	<img src="{{url+'get-image/'+building.file[0]}}" alt="0">
					    </div>
						
						<div class="item" *ngFor="let image of building.file.slice(1); let i = index">
							<img src="{{url+'get-image/'+image}}" alt="{{i+1}}">
						</div>
					</div>
					

					<!-- Controls -->
					<a class="left carousel-control" href="#building-image-gallery" role="button" data-slide="prev">
						<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
					    <span class="sr-only">Previous</span>
					</a>
					  
					<a class="right carousel-control" href="#building-image-gallery" role="button" data-slide="next">
						<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
						<span class="sr-only">Next</span>
					</a>
				</div>

				<div class="building-default" *ngIf="!building.file[0]">
					<img src="assets/building.png" width="350" height="200"/>
				</div>
			</div>
		</div>

  	<div id="publications">
		<div *ngFor="let publication of publications" class="item-publication">
			<div class="panel panel-default">
				<div class="panel-body">
					<div class="publication-text">
						<h4 *ngIf="publication.rate">Review's Rate: {{publication.rate}}</h4>
						<h4 *ngIf="!publication.rate">Review's Rate: --</h4>

						<p>
						{{publication.text}}
						</p>

						<div>
							Can be contacted: 
							<span *ngIf="publication.canBeContacted">Yes</span>
							<span *ngIf="!publication.canBeContacted">No</span>
							<button class="btn btn-success" pull-left (click)="sendMessage(publication.user, refAddress)" *ngIf="publication.canBeContacted == 1" style="margin:5px;">
								<span class="glyphicon 	glyphicon-envelope"></span>
							</button>
							<button class="btn btn-danger" pull-left *ngIf="publication.canBeContacted == 0">
								<span class="glyphicon 	glyphicon-envelope" style="margin:5px;"></span>
							</button> 
						</div>

						<div *ngIf="publication.file[0]">
							Images:
							<button class="btn btn-warning" pull-right (click)="showThisImage(publication._id)" *ngIf="showImage != publication._id" style="margin:5px;">
								<span class="glyphicon 	glyphicon-picture"></span>
							</button>
							<button class="btn btn-danger" pull-right (click)="hideThisImage(publication._id)" *ngIf="showImage == publication._id" style="margin:5px;">
								<span class="glyphicon 	glyphicon-remove-circle"></span>
							</button>
						</div>

						<span class="date" class="text-muted">
							{{ (publication.created_at | amFromUnix) | amLocale:'en' | amTimeAgo}}
						</span>
					</div>
				</div>

				<div class="publication-default" *ngIf="publication.file.length == 1 && showImage == publication._id" align="center">
					<img src="{{url+'get-image/'+publication.file[0]}}" width="350" height="200"/>
				</div>
				
				<!--Carousel Wrapper-->
				<div id="pub-image-gallery" class="carousel slide" data-ride="carousel" *ngIf="publication.file.length>1 && showImage == publication._id">

				  	<!-- Indicators -->
					<ol class="carousel-indicators">
						<li data-target="#pub-image-gallery" data-slide-to="0" class="active"></li>
						<li data-target="#pub-image-gallery" *ngFor="let image of publication.file.slice(1); let i = index" data-slide-to="{{i+1}}"></li>

					</ol>

					<!-- Wrapper for slides -->
				  	<div class="carousel-inner" role="listbox" >
					    <div class="item active">
					    	<img src="{{url+'get-image/'+publication.file[0]}}" alt="0">
					    </div>
						
						<div class="item" *ngFor="let image of publication.file.slice(1); let i = index">
							<img src="{{url+'get-image/'+image}}" alt="{{i+1}}" >
						</div>
					</div>
					

					<!-- Controls -->
					<a class="left carousel-control" href="#pub-image-gallery" role="button" data-slide="prev">
						<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
					    <span class="sr-only">Previous</span>
					</a>
					  
					<a class="right carousel-control" href="#pub-image-gallery" role="button" data-slide="next">
						<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
						<span class="sr-only">Next</span>
					</a>
				</div>
			</div>
		</div>
	</div>
</div>
